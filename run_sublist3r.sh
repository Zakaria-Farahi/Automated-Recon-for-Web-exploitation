#!/bin/bash

# Function to display usage information
usage() {
  echo "Usage: $0 <domain>"
  echo "  domain: The domain for which to enumerate subdomains."
  exit 1
}

# Check if help is requested
if [ "$1" = "-h" ]; then
  usage
fi
# Check if the correct number of arguments is given
if [ $# -ne 1 ]; then
  usage
fi

# Assign arguments to variables
domain=$1

# Define the output path
output_path="./Subdomain/Sublist3r/res_Sub.txt"

# Check if Sublist3r is installed
if ! command -v sublist3r &>/dev/null; then
  echo "Sublist3r could not be found. Please install it first."
  exit 1
fi

# Run Sublist3r
echo "Running Sublist3r for the domain: $domain"
sublist3r -d $domain -o $output_path >/dev/null

# Check if the output file has been created
if [ -f "$output_path" ]; then
  echo "Subdomain enumeration completed successfully. Results are saved to $output_path"
else
  echo "Failed to save the results. Please check if the provided path is correct and writable."
  exit 1
fi
